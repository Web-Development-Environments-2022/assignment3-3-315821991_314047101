{"version":3,"sources":["webpack:///./src/pages/SearchPage.vue?2c0b","webpack:///src/pages/SearchPage.vue","webpack:///./src/pages/SearchPage.vue?c6a9","webpack:///./src/pages/SearchPage.vue","webpack:///./src/pages/SearchPage.vue?2292","webpack:///./src/assets/search_icon.png"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","directives","name","rawName","value","expression","attrs","domProps","on","SearchAction","$event","target","composing","LastQuery","is_query","_e","number_options","model","form","callback","$$v","$set","cuisine_options","diet_options","intolerance_options","onReset","onSearch","search_results","length","TimeSort","PopularitySort","_l","r","key","id","staticStyle","_m","staticRenderFns","components","RecipePreview","data","text","disabled","results_number","cuisine","diet","intolerance","submitError","is_search_return","response","withCredentials","console","methods","validateState","$dirty","$error","sessionStorage","component","module","exports"],"mappings":"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","file":"js/chunk-05a439f2.ee8f9ccc.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('h1',{staticClass:\"title\"},[_vm._v(\"Search for our recipes..\")]),_c('div',{staticClass:\"input-query\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.LastQuery),expression:\"LastQuery\"}],attrs:{\"size\":\"50\",\"type\":\"text\",\"placeholder\":\"What recipes would you like to explore?\",\"required\":\"\"},domProps:{\"value\":(_vm.LastQuery)},on:{\"keyup\":_vm.SearchAction,\"input\":function($event){if($event.target.composing){ return; }_vm.LastQuery=$event.target.value}}})]),(!this.is_query)?_c('div',{staticClass:\"error_search\"},[_c('p',[_vm._v(\"You must enter a query..\")])]):_vm._e(),_c('div',{staticClass:\"search_filters\"},[_c('b-form-select',{staticClass:\"options\",attrs:{\"options\":_vm.number_options},model:{value:(_vm.form.results_number),callback:function ($$v) {_vm.$set(_vm.form, \"results_number\", $$v)},expression:\"form.results_number\"}}),_c('br'),_c('b-form-select',{staticClass:\"options\",attrs:{\"options\":_vm.cuisine_options},model:{value:(_vm.form.cuisine),callback:function ($$v) {_vm.$set(_vm.form, \"cuisine\", $$v)},expression:\"form.cuisine\"}}),_c('br'),_c('b-form-select',{staticClass:\"options\",attrs:{\"options\":_vm.diet_options},model:{value:(_vm.form.diet),callback:function ($$v) {_vm.$set(_vm.form, \"diet\", $$v)},expression:\"form.diet\"}}),_c('br'),_c('b-form-select',{staticClass:\"options\",attrs:{\"options\":_vm.intolerance_options},model:{value:(_vm.form.intolerance),callback:function ($$v) {_vm.$set(_vm.form, \"intolerance\", $$v)},expression:\"form.intolerance\"}})],1),_c('br'),_c('b-button',{staticClass:\"reset_button\",attrs:{\"variant\":\"outline-info\"},on:{\"click\":_vm.onReset}},[_vm._v(\"Reset Filters\")]),_c('div',{staticClass:\"search_button\"},[_c('div',{on:{\"click\":_vm.onSearch}},[_c('img',{attrs:{\"src\":require(\"../assets/search_icon.png\"),\"width\":\"25\",\"height\":\"25\"}})])]),(this.is_search_return)?_c('div',[(!_vm.search_results.length==0)?_c('div',{staticClass:\"sort_button\"},[_c('b-dropdown',{staticClass:\"m-md-2\",attrs:{\"size\":\"sm\",\"id\":\"dropdown-1\",\"text\":\"Sort recipes by\"}},[_c('b-dropdown-item',{on:{\"click\":_vm.TimeSort}},[_vm._v(\"Cooking Time\")]),_c('b-dropdown-item',{on:{\"click\":_vm.PopularitySort}},[_vm._v(\"Popularity\")])],1)],1):_vm._e()]):_vm._e(),(this.is_search_return)?_c('b-row',_vm._l((_vm.search_results),function(r){return _c('b-col',{key:r.id},[_c('RecipePreview',{staticClass:\"recipePreview\",staticStyle:{\"width\":\"450px\",\"height\":\"273px\",\"text-align\":\"center\"},attrs:{\"recipe\":r}})],1)}),1):_vm._e(),(this.is_search_return)?_c('div',[(_vm.search_results.length==0)?_c('div',{staticClass:\"center_error\"},[_vm._m(0)]):_vm._e()]):_vm._e()],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('h2',[_vm._v(\"Unfortunately we do not have any result matching to your search...\"),_c('br'),_vm._v(\"Please try again\")])}]\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"container\">\r\n    <h1 class=\"title\">Search for our recipes..</h1>\r\n\r\n      <div class=\"input-query\">\r\n        <input size=\"50\" type=\"text\" placeholder=\"What recipes would you like to explore?\" v-model=\"LastQuery\" required @keyup=\"SearchAction\">\r\n      </div>\r\n      <div v-if=\"!this.is_query\" class=\"error_search\">\r\n        <p>You must enter a query..</p>\r\n      </div>\r\n      \r\n      <div class=\"search_filters\">\r\n        <b-form-select class=\"options\" v-model=\"form.results_number\" :options=\"number_options\"></b-form-select><br>\r\n        <b-form-select class=\"options\" v-model=\"form.cuisine\" :options=\"cuisine_options\"></b-form-select><br>\r\n        <b-form-select class=\"options\" v-model=\"form.diet\" :options=\"diet_options\"></b-form-select><br>\r\n        <b-form-select class=\"options\" v-model=\"form.intolerance\" :options=\"intolerance_options\"></b-form-select>\r\n      </div>\r\n      <br>\r\n\r\n      <b-button class=\"reset_button\" variant=\"outline-info\" @click=\"onReset\">Reset Filters</b-button>\r\n      <div class=\"search_button\">\r\n      <div @click=\"onSearch\"> <img src=\"../assets/search_icon.png\" width=\"25\" height=\"25\" ></div>\r\n      </div>\r\n\r\n      <div v-if=\"this.is_search_return\">\r\n          <div class=\"sort_button\" v-if=\"!search_results.length==0\"> \r\n            <b-dropdown size=\"sm\" id=\"dropdown-1\" text=\"Sort recipes by\" class=\"m-md-2\">\r\n              <b-dropdown-item @click=\"TimeSort\">Cooking Time</b-dropdown-item>\r\n              <b-dropdown-item @click=\"PopularitySort\">Popularity</b-dropdown-item>\r\n            </b-dropdown>\r\n          </div>\r\n      </div>\r\n      \r\n      <b-row v-if=\"this.is_search_return\">\r\n        <b-col v-for=\"r in search_results\" :key=\"r.id\">\r\n          <RecipePreview style=\"width: 450px; height:273px; text-align:center;\"  class=\"recipePreview\" :recipe=\"r\" />\r\n        </b-col>\r\n      </b-row>\r\n\r\n      <div v-if=\"this.is_search_return\">\r\n            <div class=\"center_error\" v-if=\"search_results.length==0\">\r\n              <h2>Unfortunately we do not have any result matching to your search...<br>Please try again</h2>\r\n          </div>\r\n      </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport RecipePreview from \"../components/RecipePreview.vue\";\r\n\r\nexport default {\r\n  name: \"Search\",\r\n  components: {\r\n    RecipePreview\r\n  },\r\n  data() {\r\n    return {\r\n      search_results: [],\r\n      cuisine_options: [{ value: \"\", text: 'Cusine', disabled: true}],\r\n      diet_options: [{ value: \"\", text: 'Diet', disabled: true}],\r\n      number_options: [5, 10, 15],\r\n      intolerance_options: [{ value: \"\", text: 'Intolerance', disabled: true}],\r\n      form: {\r\n        results_number: 5,\r\n        cuisine: \"\",\r\n        diet: \"\",\r\n        intolerance: \"\",\r\n        submitError: undefined\r\n      },\r\n      LastQuery: sessionStorage.getItem(\"LastQuery\"),\r\n      is_query: true,\r\n      is_search_return: false,\r\n    };\r\n  },\r\n  async created() {\r\n      try {\r\n        let response;\r\n        response = await this.axios.get(\r\n        this.$root.store.server_domain + \"/recipes/search_filtering_options\", { withCredentials: true });\r\n        if (response.status !== 200) this.$router.replace(\"/NotFound\");\r\n        this.cuisine_options.push(...response.data[0][0].split(\",\"));\r\n        this.diet_options.push(...response.data[1][0].split(\",\"));\r\n        this.intolerance_options.push(...response.data[2][0].split(\",\"));\r\n      } catch (error) {\r\n        console.log(\"error.response.status\", error.response.status);\r\n        this.$router.replace(\"/NotFound\");\r\n        return;\r\n      }\r\n  },\r\n  methods: {\r\n    validateState(param) {\r\n      const { $dirty, $error } = this.$v.form[param];\r\n      return $dirty ? !$error : null;\r\n    },\r\n    async onSearch() {\r\n      this.is_search_return = false;\r\n      let response;\r\n      if(this.LastQuery == null || this.LastQuery == undefined || this.LastQuery == \"\")\r\n      {\r\n        this.is_query = false;\r\n        return;\r\n      }\r\n      this.is_query = true;\r\n      try {\r\n        response = await this.axios.get(\r\n          this.$root.store.server_domain + \"/recipes/search?query=\" + this.LastQuery + \"&number=\" + this.form.results_number\r\n          + \"&cuisine='\" + this.form.cuisine + \"'&diet=\" + this.form.diet + \"&intolerance=\" + this.form.intolerance, { withCredentials: true });\r\n        if (response.status !== 200) this.$router.replace(\"/NotFound\");\r\n      } catch (error) {\r\n        console.log(\"error.response.status\", error.response.status);\r\n        this.$router.replace(\"/NotFound\");\r\n        return;\r\n      }\r\n      this.is_search_return = true;\r\n      const recipes = response.data;\r\n      this.search_results = [];\r\n      this.search_results.push(...recipes);\r\n      sessionStorage.setItem(\"LastQuery\", this.LastQuery);\r\n    },\r\n    onReset() {\r\n        this.form.results_number = 5;\r\n        this.form.cuisine = \"\";\r\n        this.form.diet = \"\";\r\n        this.form.intolerance = \"\";\r\n    },\r\n    TimeSort() {\r\n      this.search_results.sort((recipe_1, recipe_2) => {\r\n          return recipe_1.readyInMinutes - recipe_2.readyInMinutes;\r\n        });\r\n    },\r\n    PopularitySort() {\r\n      this.search_results.sort((recipe_1, recipe_2) => {\r\n          return recipe_2.aggregateLikes - recipe_1.aggregateLikes;\r\n        });\r\n    },\r\n    SearchAction()\r\n    {\r\n      if(!this.is_query)\r\n      {\r\n        if(this.LastQuery != \"\")\r\n        {\r\n          this.is_query = true;\r\n        }\r\n      }\r\n    }\r\n    }\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.container {\r\n  margin: 0 auto;\r\n  width: 60%;\r\n  text-align: center;\r\n\r\n}\r\n\r\n.input-query\r\n{\r\n  margin: 30px auto;\r\n  display: flex;\r\n  justify-content: center;\r\n}\r\nh1{\r\n    text-align:center; \r\n    color: rgb(182, 99, 22);\r\n    font-family:'Gill Sans', 'Gill Sans MT';\r\n    background-color: rgb(245, 234, 212);\r\n    padding: 20px;\r\n}\r\n\r\n.search_button\r\n{\r\n  width: 5%;\r\n  display: flex;\r\n  justify-content: center;\r\n  margin: 0 0 10px;\r\n  cursor: pointer;\r\n  flex-direction: row;\r\n  margin: 5px auto;\r\n  margin-bottom: 15px;\r\n}\r\n\r\n.search_button:hover\r\n{\r\n  transform: translateY(-2px);\r\n}\r\n\r\n.error_search\r\n{\r\n  color: red;\r\n}\r\n.options\r\n{\r\n  justify-content: center;\r\n  display: flex;\r\n  width: 21%;\r\n  margin: 5px auto;\r\n}\r\n\r\n.search_filters\r\n{\r\n  justify-content: center;\r\n  display: flex;\r\n  flex-direction: row;\r\n}\r\n.center_error\r\n{\r\n  display: flex;\r\n  justify-content: center;\r\n  font-size: 20px;\r\n}\r\n.title\r\n{\r\n  margin: 0 0 20px;\r\n}\r\n\r\n.reset_button\r\n{\r\n    margin: 0 0 20px;\r\n}\r\n\r\n.reset_button:hover\r\n{\r\n  transform: translateY(-2px);\r\n}\r\n\r\nh2{\r\n    text-align:center;\r\n    color: rgb(182, 99, 22);\r\n    font-family:'Gill Sans', 'Gill Sans MT';\r\n    font-size: 20px;\r\n    padding: 20px;\r\n    margin: 0 0 20px;\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SearchPage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SearchPage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SearchPage.vue?vue&type=template&id=22c6a54d&scoped=true&\"\nimport script from \"./SearchPage.vue?vue&type=script&lang=js&\"\nexport * from \"./SearchPage.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SearchPage.vue?vue&type=style&index=0&id=22c6a54d&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"22c6a54d\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SearchPage.vue?vue&type=style&index=0&id=22c6a54d&lang=scss&scoped=true&\"","module.exports = __webpack_public_path__ + \"img/search_icon.e890a2c8.png\";"],"sourceRoot":""}