(function(e){function t(t){for(var a,n,o=t[0],c=t[1],l=t[2],u=0,p=[];u<o.length;u++)n=o[u],Object.prototype.hasOwnProperty.call(s,n)&&s[n]&&p.push(s[n][0]),s[n]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);d&&d(t);while(p.length)p.shift()();return i.push.apply(i,l||[]),r()}function r(){for(var e,t=0;t<i.length;t++){for(var r=i[t],a=!0,n=1;n<r.length;n++){var o=r[n];0!==s[o]&&(a=!1)}a&&(i.splice(t--,1),e=c(c.s=r[0]))}return e}var a={},n={app:0},s={app:0},i=[];function o(e){return c.p+"js/"+({}[e]||e)+"."+{"chunk-05a439f2":"ee8f9ccc","chunk-23712140":"c777b962","chunk-30a8827f":"5a6489b5","chunk-4e24722e":"926cf430","chunk-53027404":"4ba6cbbb","chunk-56a3067e":"4d04135e","chunk-75548fa6":"c945c5ed","chunk-77e30b5f":"0d5c0893","chunk-95c19f28":"10c63b97","chunk-acba138e":"54e7881c","chunk-e8a66ff2":"7b6de8f2"}[e]+".js"}function c(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,c),r.l=!0,r.exports}c.e=function(e){var t=[],r={"chunk-05a439f2":1,"chunk-23712140":1,"chunk-30a8827f":1,"chunk-4e24722e":1,"chunk-53027404":1,"chunk-56a3067e":1,"chunk-75548fa6":1,"chunk-77e30b5f":1,"chunk-95c19f28":1,"chunk-acba138e":1,"chunk-e8a66ff2":1};n[e]?t.push(n[e]):0!==n[e]&&r[e]&&t.push(n[e]=new Promise((function(t,r){for(var a="css/"+({}[e]||e)+"."+{"chunk-05a439f2":"42286f5f","chunk-23712140":"c6f34091","chunk-30a8827f":"805bfcbb","chunk-4e24722e":"e99f130f","chunk-53027404":"59de74e7","chunk-56a3067e":"d90491ce","chunk-75548fa6":"daf77e5e","chunk-77e30b5f":"a7300125","chunk-95c19f28":"b5d188a4","chunk-acba138e":"4016f5c2","chunk-e8a66ff2":"b613b6b0"}[e]+".css",s=c.p+a,i=document.getElementsByTagName("link"),o=0;o<i.length;o++){var l=i[o],u=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(u===a||u===s))return t()}var p=document.getElementsByTagName("style");for(o=0;o<p.length;o++){l=p[o],u=l.getAttribute("data-href");if(u===a||u===s)return t()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=t,d.onerror=function(t){var a=t&&t.target&&t.target.src||s,i=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=a,delete n[e],d.parentNode.removeChild(d),r(i)},d.href=s;var h=document.getElementsByTagName("head")[0];h.appendChild(d)})).then((function(){n[e]=0})));var a=s[e];if(0!==a)if(a)t.push(a[2]);else{var i=new Promise((function(t,r){a=s[e]=[t,r]}));t.push(a[2]=i);var l,u=document.createElement("script");u.charset="utf-8",u.timeout=120,c.nc&&u.setAttribute("nonce",c.nc),u.src=o(e);var p=new Error;l=function(t){u.onerror=u.onload=null,clearTimeout(d);var r=s[e];if(0!==r){if(r){var a=t&&("load"===t.type?"missing":t.type),n=t&&t.target&&t.target.src;p.message="Loading chunk "+e+" failed.\n("+a+": "+n+")",p.name="ChunkLoadError",p.type=a,p.request=n,r[1](p)}s[e]=void 0}};var d=setTimeout((function(){l({type:"timeout",target:u})}),12e4);u.onerror=u.onload=l,document.head.appendChild(u)}return Promise.all(t)},c.m=e,c.c=a,c.d=function(e,t,r){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(c.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)c.d(r,a,function(t){return e[t]}.bind(null,a));return r},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/",c.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],u=l.push.bind(l);l.push=t,l=l.slice();for(var p=0;p<l.length;p++)t(l[p]);var d=u;i.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"06ef":function(e,t,r){e.exports=r.p+"img/vegan_icon.e5c35191.png"},"0b9c":function(e,t,r){},"3c23":function(e,t,r){"use strict";r("4781")},4295:function(e,t,r){e.exports=r.p+"img/favorite_icon.5f059308.png"},4781:function(e,t,r){},5183:function(e,t,r){"use strict";r("93ff")},"56d7":function(e,t,r){"use strict";r.r(t);var a=r("2b0e"),n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("b-navbar",{staticClass:"navbar",attrs:{toggleable:"lg"}},[r("img",{attrs:{src:"https://www.allrecipes.com/img/misc/og-default.png",width:"220",height:"100"}}),r("b-navbar-brand",{attrs:{to:{name:"main"}}},[e._v("Main")]),r("b-collapse",{attrs:{id:"nav-collapse","is-nav":""}},[r("b-navbar-nav",[r("b-nav-item",{attrs:{to:{name:"search"}}},[e._v("Search")]),r("b-nav-item",{attrs:{to:{name:"about"}}},[e._v("About")])],1),e.$root.store.username?r("b-navbar-nav",{staticClass:"ml-auto"},[r("b-nav-item",{attrs:{to:{name:"addPersonalRecipes"}}},[e._v("Create Recipe")]),r("b-nav-item-dropdown",{scopedSlots:e._u([{key:"button-content",fn:function(){return[e._v("Personal ")]},proxy:!0}])},[r("b-dropdown-item",{attrs:{to:{name:"favorites"}}},[e._v("Favorites")]),r("b-dropdown-item",{attrs:{to:{name:"personalRecipes"}}},[e._v("My Recipes")]),r("b-dropdown-item",{attrs:{to:{name:"familyRecipe"}}},[e._v("Family Recipe")])],1),r("b-nav-item-dropdown",{attrs:{right:""},scopedSlots:e._u([{key:"button-content",fn:function(){return[e._v(" "+e._s(e.$root.store.username)+" ")]},proxy:!0}])},[r("b-dropdown-item",{attrs:{href:"#"},on:{click:function(t){return e.Logout()}}},[e._v("Log Out")])],1)],1):r("b-navbar-nav",{staticClass:"ml-auto"},[r("b-nav-item",{attrs:{to:{name:"login"}}},[e._v("Login")]),r("b-nav-item",{attrs:{to:{name:"register"}}},[e._v("Register")]),r("b-navbar-brand",[e._v("Hello Guest")])],1)],1)],1),r("router-view")],1)},s=[],i={name:"App",methods:{async Logout(){await this.axios.post(this.$root.store.server_domain+"/Logout",{withCredentials:!0});this.$root.store.logout(),sessionStorage.setItem("LastQuery",""),this.$root.toast("Logout","User logged out successfully","success"),this.$router.push("/").catch(()=>{this.$forceUpdate()})}}},o=i,c=(r("5c0b"),r("2877")),l=Object(c["a"])(o,n,s,!1,null,null,null),u=l.exports,p=r("a7fe"),d=r.n(p),h=r("bc3a"),f=r.n(h),m=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[r("h1",{staticClass:"title"},[e._v("Main Page")]),r("h2",{staticClass:"subTitles"},[r("RecipePreviewList",{staticClass:"RandomRecipes center",attrs:{title:"Explore this recipes"}})],1),r("div",[r("h5",{staticClass:"subTitles"},[e.$root.store.username?e._e():r("b-container",{staticClass:"need_login"},[r("h1",{staticClass:"title"},[r("br"),e._v("Login")]),r("div",{staticClass:"h1LG"},[r("b-form",{on:{submit:function(t){return t.preventDefault(),e.onLogin.apply(null,arguments)}}},[r("b-form-group",{staticStyle:{"font-family":"'Gill Sans', 'Gill Sans MT'"},attrs:{id:"input-group-Username","label-cols-sm":"3",label:"Username:","label-for":"Username"}},[r("b-form-input",{staticStyle:{"font-family":"'Gill Sans', 'Gill Sans MT'"},attrs:{id:"Username",type:"text",state:e.validateState("username")},model:{value:e.$v.form.username.$model,callback:function(t){e.$set(e.$v.form.username,"$model",t)},expression:"$v.form.username.$model"}}),r("b-form-invalid-feedback",[e._v("Username is required")])],1),r("b-form-group",{staticStyle:{"font-family":"'Gill Sans', 'Gill Sans MT'"},attrs:{id:"input-group-Password","label-cols-sm":"3",label:"Password:","label-for":"Password"}},[r("b-form-input",{attrs:{id:"Password",type:"password",state:e.validateState("password")},model:{value:e.$v.form.password.$model,callback:function(t){e.$set(e.$v.form.password,"$model",t)},expression:"$v.form.password.$model"}}),r("b-form-invalid-feedback",[e._v("Password is required")])],1),r("b-button",{staticClass:"mx-auto w-100",staticStyle:{width:"100px",display:"block",color:"rgb(245, 234, 212)","background-color":"rgb(175, 129, 38)"},attrs:{type:"submit",variant:"primary"}},[e._v("Login")]),r("div",{staticClass:"mt-2",staticStyle:{"font-family":"'Gill Sans', 'Gill Sans MT'"}},[e._v("Do not have an account yet? "),r("router-link",{attrs:{to:"register"}},[e._v(" Register in here")])],1)],1),e.form.submitError?r("b-alert",{staticClass:"mt-2",attrs:{variant:"warning",dismissible:"",show:""}},[e._v("Login failed: "+e._s(e.form.submitError))]):e._e()],1)]),e.$root.store.username?r("b-container",[r("h3",{staticClass:"title"},[r("br"),e._v("Last Viewed Recipes")]),0==e.recipes.length?r("div",{staticClass:"center_div"},[e._v(" You have not yet viewed any recipes on our website... ")]):e._e(),r("b-col",e._l(e.recipes,(function(e){return r("b-row",{key:e.id},[r("RecipePreview",{staticClass:"recipePreview",staticStyle:{width:"500px",height:"300px"},attrs:{recipe:e}})],1)})),1)],1):e._e()],1)])])},b=[],v=r("b5ae"),g=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-container",[r("h3",[r("h1",[e._v(e._s(e.title))]),r("b-col",[r("div",{staticClass:"div_center"},e._l(e.recipes,(function(e){return r("b-row",{key:e.id},[r("RecipePreview",{staticClass:"recipePreview",staticStyle:{"text-align":"center"},attrs:{recipe:e}})],1)})),1),r("div",[r("b-button",{staticClass:"random_btn",attrs:{pill:"",variant:"info"},on:{click:e.updateRecipes}},[e._v("More recieps")])],1)])],1)])},_=[],w=(r("4f4d"),r("832a")),y={name:"RecipePreviewList",components:{RecipePreview:w["a"]},props:{title:{type:String,required:!0}},data(){return{recipes:[]}},mounted(){this.updateRecipes()},methods:{async updateRecipes(){try{const e=await this.axios.get(this.$root.store.server_domain+"/recipes/random",{withCredentials:!0}),t=e.data;this.recipes=[],this.recipes.push(...t)}catch(e){console.log(e)}}}},k=y,$=(r("3c23"),Object(c["a"])(k,g,_,!1,null,"1c0b8494",null)),C=$.exports,x={components:{RecipePreviewList:C,RecipePreview:w["a"]},data(){return{recipes:[],form:{username:"",password:"",submitError:void 0}}},validations:{form:{username:{required:v["required"]},password:{required:v["required"]}}},mounted(){this.LastThreeViewes()},methods:{validateState(e){const{$dirty:t,$error:r}=this.$v.form[e];return t?!r:null},async Login(){try{await this.axios.post(this.$root.store.server_domain+"/Login",{username:this.form.username,password:this.form.password});console.log(this.$root.store.login),this.$root.store.login(this.form.username)}catch(e){console.log(e.response),this.form.submitError=e.response.data.message}},async LastThreeViewes(){try{const e=await this.axios.get(this.$root.store.server_domain+"/recipes/getThreeLastViewedRecipes",{withCredentials:!0}),t=e.data;this.recipes=[],this.recipes.push(...t)}catch(e){console.log(e)}},onLogin(){this.form.submitError=void 0,this.$v.form.$touch(),this.$v.form.$anyError||this.Login()}}},S=x,P=(r("982a"),Object(c["a"])(S,m,b,!1,null,"c77e6014",null)),L=P.exports,R=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e._m(0),r("router-link",{attrs:{to:"/",exact:"",id:"backhome"}},[e._v("Back to Home")])],1)},E=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container",attrs:{id:"not_found_page"}},[r("br"),r("br"),r("br"),r("br"),r("br"),r("br"),r("h1",[e._v("Sorry, we can't find this page")]),r("br"),r("br"),r("br"),r("br"),r("br"),r("br")])}],j=(r("5183"),{}),O=Object(c["a"])(j,R,E,!1,null,null,null),T=O.exports;const M=[{path:"/",name:"main",component:L},{path:"/register",name:"register",component:()=>r.e("chunk-30a8827f").then(r.bind(null,"eaff"))},{path:"/login",name:"login",component:()=>r.e("chunk-56a3067e").then(r.bind(null,"62cc"))},{path:"/search",name:"search",component:()=>r.e("chunk-05a439f2").then(r.bind(null,"37906"))},{path:"/recipe/:recipeId",name:"recipe",component:()=>r.e("chunk-23712140").then(r.bind(null,"6619"))},{path:"/users/favorites",name:"favorites",component:()=>r.e("chunk-75548fa6").then(r.bind(null,"3635"))},{path:"/users/family_recipes",name:"familyRecipe",component:()=>r.e("chunk-77e30b5f").then(r.bind(null,"9983"))},{path:"/users/family_recipe_page",name:"familyRecipePage",component:()=>r.e("chunk-4e24722e").then(r.bind(null,"4631"))},{path:"/users/get_personal_recipe",name:"personalRecipes",component:()=>r.e("chunk-e8a66ff2").then(r.bind(null,"d71c"))},{path:"/users/personal_recipe_view/:recipeId",name:"personal_recipe_view",component:()=>r.e("chunk-95c19f28").then(r.bind(null,"c13c"))},{path:"/about",name:"about",component:()=>r.e("chunk-acba138e").then(r.bind(null,"478b"))},{path:"/users/add_personal_recipe",name:"addPersonalRecipes",component:()=>r.e("chunk-53027404").then(r.bind(null,"f8a3"))},{path:"*",name:"notFound",component:T}];var q=M,F=r("8c4f"),G=r("1dce"),A=r.n(G),I=(r("f9e3"),r("2dd8"),r("1073")),N=r("cbd0"),U=r("b1fc"),D=r("7049"),H=r("a7e2"),B=r("f9bc"),V=r("44d4"),J=r("cca8"),K=r("51c2"),Q=r("498a"),Y=r("dbbe");f.a.defaults.withCredentials=!0,a["default"].use(F["a"]);const z=new F["a"]({routes:q});[I["a"],N["a"],U["a"],D["a"],H["a"],B["a"],V["a"],J["a"],K["a"],Q["a"],Y["a"]].forEach(e=>a["default"].use(e)),a["default"].use(A.a),f.a.interceptors.request.use((function(e){return e}),(function(e){return Promise.reject(e)})),f.a.interceptors.response.use((function(e){return e}),(function(e){return Promise.reject(e)})),a["default"].use(d.a,f.a),a["default"].config.productionTip=!1;const W={username:localStorage.username,server_domain:"https://allrecipes.cs.bgu.ac.il",login(e){localStorage.setItem("username",e),this.username=e,console.log("login",this.username)},logout(){console.log("logout"),localStorage.removeItem("username"),this.username=void 0}};console.log(W),new a["default"]({router:z,data(){return{store:W}},methods:{toast(e,t,r=null,a=!1){this.$bvToast.toast(""+t,{title:""+e,toaster:"b-toaster-top-center",variant:r,solid:!0,appendToast:a,autoHideDelay:3e3})}},render:e=>e(u)}).$mount("#app")},"5c0b":function(e,t,r){"use strict";r("9c0c")},"5f79":function(e,t,r){e.exports=r.p+"img/gluten_free_icon.3d1c66a4.png"},"65e2":function(e,t,r){"use strict";r("b577")},"72bc":function(e,t,r){e.exports=r.p+"img/not_favorite_icon.2070dd41.png"},"832a":function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("router-link",{staticClass:"recipe-preview",attrs:{to:{name:e.path_name,params:{recipeId:e.recipe.id}}}},[a("div",{staticClass:"recipe-body",staticStyle:{"text-align":"center"}},[e.recipe.image?a("img",{staticClass:"recipe_preview_img",staticStyle:{width:"270px",height:"173px"},attrs:{src:e.recipe.image}}):a("img",{staticClass:"recipe_preview_img",staticStyle:{width:"270px",height:"173px"},attrs:{src:e.default_img}})]),a("div",{staticClass:"recipe-footer",staticStyle:{"text-align":"center"}},[a("div",{staticClass:"recipe-title",staticStyle:{"text-align":"center"},attrs:{title:e.recipe.title}},[e._v(" "+e._s(e.recipe.title)+" ")]),a("ul",{staticClass:"recipe-overview"},[a("li",[e._v(e._s(e.recipe.readyInMinutes)+" minutes")]),a("li",[e._v(e._s(e.recipe.aggregateLikes)+" likes")])]),e.flag?e._e():a("img",{staticClass:"button",attrs:{src:r("72bc"),width:"25",height:"25"}}),e.flag?a("img",{staticClass:"button",attrs:{src:r("4295"),width:"25",height:"25"}}):e._e(),1==e.recipe.vegetarian||"true"===e.recipe.vegetarian?a("img",{attrs:{src:r("9315"),width:"25",height:"25"}}):e._e(),1==e.recipe.vegan||"true"===e.recipe.vegan?a("img",{attrs:{src:r("06ef"),width:"25",height:"25"}}):e._e(),1==e.recipe.glutenFree||"true"==e.recipe.glutenFree?a("img",{attrs:{src:r("5f79"),width:"25",height:"25"}}):e._e(),e.isSeen?a("img",{staticClass:"button",attrs:{src:r("ad24"),width:"60",height:"20"}}):e._e()])])},n=[],s={data(){return{path_name:"recipe",flag:!1,isSeen:!1,default_img:"https://spoonacular.com/recipeImages/2225-556x370.jpg"}},props:{recipe:{type:Object,required:!0}},async created(){let e=this.recipe.id;if(e<0&&(this.path_name="personal_recipe_view"),this.$root.store.username){try{let r;try{r=await this.axios.get(this.$root.store.server_domain+"/users/get_favorites_ids",{withCredentials:!0}),200!==r.status&&this.$router.replace("/NotFound")}catch(t){return console.log("error.favorite_response.status",t.favorite_response.status),void this.$router.replace("/NotFound")}for(let t=0;t<r.data.length;t++)r.data[t]==e&&(this.flag=!0)}catch(t){console.log(t)}try{let r;try{r=await this.axios.get(this.$root.store.server_domain+"/recipes/getAllHistory",{withCredentials:!0}),200!==r.status&&this.$router.replace("/NotFound")}catch(t){return console.log("error.is_seen_recipe.status",t.is_seen_recipe.status),void this.$router.replace("/NotFound")}for(let t=0;t<r.data.length;t++)r.data[t]==e&&(this.isSeen=!0)}catch(t){console.log(t)}}}},i=s,o=(r("65e2"),r("2877")),c=Object(o["a"])(i,a,n,!1,null,"6664b194",null);t["a"]=c.exports},9315:function(e,t,r){e.exports=r.p+"img/vegetarian_icon.cfb74c9d.png"},"93ff":function(e,t,r){},"982a":function(e,t,r){"use strict";r("0b9c")},"9c0c":function(e,t,r){},ad24:function(e,t,r){e.exports=r.p+"img/seen.55f301ca.png"},b577:function(e,t,r){}});
//# sourceMappingURL=app.4177d3df.js.map