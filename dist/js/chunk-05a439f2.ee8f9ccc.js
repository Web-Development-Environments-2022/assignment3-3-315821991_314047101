(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-05a439f2"],{37906:function(t,e,s){"use strict";s.r(e);var r=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container"},[r("h1",{staticClass:"title"},[t._v("Search for our recipes..")]),r("div",{staticClass:"input-query"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.LastQuery,expression:"LastQuery"}],attrs:{size:"50",type:"text",placeholder:"What recipes would you like to explore?",required:""},domProps:{value:t.LastQuery},on:{keyup:t.SearchAction,input:function(e){e.target.composing||(t.LastQuery=e.target.value)}}})]),this.is_query?t._e():r("div",{staticClass:"error_search"},[r("p",[t._v("You must enter a query..")])]),r("div",{staticClass:"search_filters"},[r("b-form-select",{staticClass:"options",attrs:{options:t.number_options},model:{value:t.form.results_number,callback:function(e){t.$set(t.form,"results_number",e)},expression:"form.results_number"}}),r("br"),r("b-form-select",{staticClass:"options",attrs:{options:t.cuisine_options},model:{value:t.form.cuisine,callback:function(e){t.$set(t.form,"cuisine",e)},expression:"form.cuisine"}}),r("br"),r("b-form-select",{staticClass:"options",attrs:{options:t.diet_options},model:{value:t.form.diet,callback:function(e){t.$set(t.form,"diet",e)},expression:"form.diet"}}),r("br"),r("b-form-select",{staticClass:"options",attrs:{options:t.intolerance_options},model:{value:t.form.intolerance,callback:function(e){t.$set(t.form,"intolerance",e)},expression:"form.intolerance"}})],1),r("br"),r("b-button",{staticClass:"reset_button",attrs:{variant:"outline-info"},on:{click:t.onReset}},[t._v("Reset Filters")]),r("div",{staticClass:"search_button"},[r("div",{on:{click:t.onSearch}},[r("img",{attrs:{src:s("89e6"),width:"25",height:"25"}})])]),this.is_search_return?r("div",[0==!t.search_results.length?r("div",{staticClass:"sort_button"},[r("b-dropdown",{staticClass:"m-md-2",attrs:{size:"sm",id:"dropdown-1",text:"Sort recipes by"}},[r("b-dropdown-item",{on:{click:t.TimeSort}},[t._v("Cooking Time")]),r("b-dropdown-item",{on:{click:t.PopularitySort}},[t._v("Popularity")])],1)],1):t._e()]):t._e(),this.is_search_return?r("b-row",t._l(t.search_results,(function(t){return r("b-col",{key:t.id},[r("RecipePreview",{staticClass:"recipePreview",staticStyle:{width:"450px",height:"273px","text-align":"center"},attrs:{recipe:t}})],1)})),1):t._e(),this.is_search_return?r("div",[0==t.search_results.length?r("div",{staticClass:"center_error"},[t._m(0)]):t._e()]):t._e()],1)},i=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("h2",[t._v("Unfortunately we do not have any result matching to your search..."),s("br"),t._v("Please try again")])}],o=s("832a"),a={name:"Search",components:{RecipePreview:o["a"]},data(){return{search_results:[],cuisine_options:[{value:"",text:"Cusine",disabled:!0}],diet_options:[{value:"",text:"Diet",disabled:!0}],number_options:[5,10,15],intolerance_options:[{value:"",text:"Intolerance",disabled:!0}],form:{results_number:5,cuisine:"",diet:"",intolerance:"",submitError:void 0},LastQuery:sessionStorage.getItem("LastQuery"),is_query:!0,is_search_return:!1}},async created(){try{let t;t=await this.axios.get(this.$root.store.server_domain+"/recipes/search_filtering_options",{withCredentials:!0}),200!==t.status&&this.$router.replace("/NotFound"),this.cuisine_options.push(...t.data[0][0].split(",")),this.diet_options.push(...t.data[1][0].split(",")),this.intolerance_options.push(...t.data[2][0].split(","))}catch(t){return console.log("error.response.status",t.response.status),void this.$router.replace("/NotFound")}},methods:{validateState(t){const{$dirty:e,$error:s}=this.$v.form[t];return e?!s:null},async onSearch(){let t;if(this.is_search_return=!1,null==this.LastQuery||void 0==this.LastQuery||""==this.LastQuery)return void(this.is_query=!1);this.is_query=!0;try{t=await this.axios.get(this.$root.store.server_domain+"/recipes/search?query="+this.LastQuery+"&number="+this.form.results_number+"&cuisine='"+this.form.cuisine+"'&diet="+this.form.diet+"&intolerance="+this.form.intolerance,{withCredentials:!0}),200!==t.status&&this.$router.replace("/NotFound")}catch(s){return console.log("error.response.status",s.response.status),void this.$router.replace("/NotFound")}this.is_search_return=!0;const e=t.data;this.search_results=[],this.search_results.push(...e),sessionStorage.setItem("LastQuery",this.LastQuery)},onReset(){this.form.results_number=5,this.form.cuisine="",this.form.diet="",this.form.intolerance=""},TimeSort(){this.search_results.sort((t,e)=>t.readyInMinutes-e.readyInMinutes)},PopularitySort(){this.search_results.sort((t,e)=>e.aggregateLikes-t.aggregateLikes)},SearchAction(){this.is_query||""!=this.LastQuery&&(this.is_query=!0)}}},n=a,c=(s("54f0"),s("2877")),u=Object(c["a"])(n,r,i,!1,null,"22c6a54d",null);e["default"]=u.exports},"541c":function(t,e,s){},"54f0":function(t,e,s){"use strict";s("541c")},"89e6":function(t,e,s){t.exports=s.p+"img/search_icon.e890a2c8.png"}}]);
//# sourceMappingURL=chunk-05a439f2.ee8f9ccc.js.map